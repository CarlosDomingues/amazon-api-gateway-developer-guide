# Set Up a Custom Domain Name for an API in API Gateway<a name="how-to-custom-domains"></a>

**Note**  
It is now possible to choose a minimum TLS version that your API supports\. For REST APIs, you can choose TLS 1\.2 or TLS 1\.0\. For WebSocket APIs, you can only choose TLS 1\.2\.

 After deploying your REST or WebSocket API, you \(and your customers\) can invoke the API using the default base URL of the following format: 

```
https://api-id.execute-api.region.amazonaws.com/stage
```

where `api-id` is generated by API Gateway, `region` is specified by you when creating the API, and `stage` is specified by you when deploying the API\.

**Note**  
A custom domain can be associated with a REST API or a WebSocket API, but not both\.  
Custom domain names are not supported for [private APIs](apigateway-private-apis.md)\.

The hostname portion of the URL \(that is, `api-id.execute-api.region.amazonaws.com`\) refers to an API endpoint, which can be edge\-optimized or regional\. The default API endpoint can be difficult to recall and not user\-friendly\. To provide a simpler and more intuitive URL for your API users, you can set up a custom domain name \(for example, `api.example.com`\) as the API's hostname, and choose a base path \(for example, `myservice`\) to map the alternative URL to this API\. The more user\-friendly API base URL now becomes:

```
https://api.example.com/myservice
```

 If you don't set any base mapping under a custom domain name, the resulting API's base URL is the same as the custom domain \(for example, `https://api.example.com`\.\) In this case, the custom domain name cannot support more than one API\. 

When you deploy an edge\-optimized API, API Gateway sets up an Amazon CloudFront distribution and a DNS record to map the API domain name to the CloudFront distribution domain name\. Requests for the API are then routed to API Gateway through the mapped CloudFront distribution\. 

When you create a custom domain name for an edge\-optimized API, API Gateway sets up a CloudFront distribution\. But you must set up a DNS record to map the custom domain name to the CloudFront distribution domain name for API requests bound for the custom domain name to be routed to API Gateway through the mapped CloudFront distribution\. You must also provide a certificate for the custom domain name\.

When you create a custom domain name for a regional API, API Gateway creates a regional domain name for the API\. You must set up a DNS record to map the custom domain name to the regional domain name for API requests bound for the custom domain name to be routed to API Gateway through the mapped regional API endpoint\. You must also provide a certificate for the custom domain name\. 

**Note**  
 The CloudFront distribution created by API Gateway is owned by a Region\-specific account affiliated with API Gateway\. When tracing operations to create and update such a CloudFront distribution in CloudWatch Logs, you must use this API Gateway account ID\. For more information, see [Log Custom Domain Name Creation in CloudTrail](how-to-edge-optimized-custom-domain-name.md#how-to-custom-domain-log-cloudfront-distribution-update-in-cloudtrail)\. 

 To set up an edge\-optimized custom domain name or to update its certificate, you must have a permission to update CloudFront distributions\. You can do so by attaching the following IAM policy statement to an IAM user, group, or role in your account: 

```
{
    "Version": "2012-10-17",
    "Statement": [
         {
            "Sid": "AllowCloudFrontUpdateDistribution",
            "Effect": "Allow",
            "Action": [
                "cloudfront:updateDistribution"
            ],
            "Resource": [
                "*"
            ]
        }
    ]
}
```

 API Gateway supports edge\-optimized custom domain names by leveraging Server Name Indication \(SNI\) on the CloudFront distribution\. For more information on using custom domain names on a CloudFront distribution, including the required certificate format and the maximum size of a certificate key length, see [ Using Alternate Domain Names and HTTPS](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/SecureConnections.html#CNAMEsAndHTTPS) in the *Amazon CloudFront Developer Guide*\. 

 To set up a custom domain name as your API's hostname, you, as the API owner, must provide an SSL/TLS certificate for the custom domain name\. 

To provide a certificate for an edge\-optimized custom domain name, you can request [AWS Certificate Manager](https://docs.aws.amazon.com/acm/latest/userguide/) \(ACM\) to generate a new certificate in ACM or to import into ACM one issued by a third\-party certificate authority in the `us-east-1` Region \(Northern Virginia\)\.

To provide a certificate for a regional custom domain name in a Region where ACM is supported, you must request a certificate from ACM\. To provide a certificate for a regional custom domain name in a Region where ACM is not supported, you must import a certificate to API Gateway in that Region\. 

To import an SSL/TLS certificate, you must provide the PEM\-formatted SSL/TLS certificate body, its private key, and the certificate chain for the custom domain name\. Each certificate stored in ACM is identified by its ARN\. To use an AWS managed certificate for a domain name, you simply reference its ARN\. 

 ACM makes it straightforward to set up and use a custom domain name for an API: create in or import into ACM a certificate for the given domain name, set up the domain name in API Gateway with the ARN of the certificate provided by ACM, and map a base path under the custom domain name to a deployed stage of the API\. With certificates issued by ACM, you do not have to worry about exposing any sensitive certificate details, such as the private key\.

You must have a registered internet domain name in order to set up custom domain names for your APIs\. If needed, you can register an internet domain using [Amazon RouteÂ 53](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/) or using a third\-party domain registrar of your choice\. An API's custom domain name can be the name of a subdomain or the root domain \(also known as, zone apex\) of a registered internet domain\. 

After a custom domain name is created in API Gateway, you must create or update your domain name service \(DNS\) provider's resource record to map the edge\-optimized custom domain name to its CloudFront distribution domain name or to map the regional custom domain name to its regional API endpoint\. Without such a mapping, API requests bound for the custom domain name cannot reach API Gateway\.

**Note**  
 An edge\-optimized custom domain name is created in a specific Region and owned by a specific AWS account\. Moving such a custom domain name between Regions or AWS accounts involves deleting the existing CloudFront distribution and creating a new one\. The process may take approximately 30 minutes before the new custom domain name becomes available\. For more information, see [Updating CloudFront Distributions](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/HowToUpdateDistribution.html)\. 

The following pages describe how to use ACM to create an SSL/TLS certificate for a custom domain name, set up the custom domain name for an API, associate a specific API with a base path under the custom domain name, and renew \(aka rotate\) an expiring certificate that was imported into ACM for the custom domain name\. 

## Wildcard Custom Domain Names<a name="wildcard-custom-domain-names"></a>

API Gateway also supports wildcard custom domain names\. You can specify a wildcard \(`*`\) as the first subdomain of a custom domain that represents all possible subdomains of a root domain\.

For example, the wildcard custom domain name `*.example.com` results in subdomains such as `a.example.com`, `b.example.com`, and `c.example.com`, which all route to the same domain\.

Wildcard custom domain names support distinct configurations from API Gateway's standard custom domain names\. For example, in a single AWS account, you can configure `*.example.com` and `a.example.com` to behave differently\.

To create a wildcard custom domain name, you must provide a certificate issued by ACM that has been validated using either the DNS or the email validation method\. The certificate's subject must be the wildcard custom domain name\.

**Note**  
You can't create a wildcard custom domain name if a different AWS account has created a custom domain name that conflicts with the wildcard custom domain name\. For example, if account A has created `a.example.com`, then account B can't create the wildcard custom domain name `*.example.com`\.  
If account A and account B share an owner, you can contact the [AWS Support Center](https://console.aws.amazon.com/support/home#/) to request an exception\.

**Topics**
+ [Wildcard Custom Domain Names](#wildcard-custom-domain-names)
+ [Get Certificates Ready in AWS Certificate Manager](how-to-custom-domains-prerequisites.md)
+ [Choose a Minimum TLS Version for a Custom Domain in API Gateway](apigateway-custom-domain-tls-version.md)
+ [How to Create an Edge\-Optimized Custom Domain Name](how-to-edge-optimized-custom-domain-name.md)
+ [Set Up a Custom Domain Name for a Regional REST API or WebSocket API in API Gateway](apigateway-regional-api-custom-domain-create.md)
+ [Migrate a Custom Domain Name to a Different API Endpoint](apigateway-regional-api-custom-domain-migrate.md)